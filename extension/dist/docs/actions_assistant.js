"use strict";var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K={exports:{}};(function(g,d){(function(s,m){m(g)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:se,function(s){var m,W;if(!((W=(m=globalThis.chrome)==null?void 0:m.runtime)!=null&&W.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const w="The message port closed before a response was received.",D=x=>{const v={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(v).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class S extends WeakMap{constructor(r,t=void 0){super(t),this.createItem=r}get(r){return this.has(r)||this.set(r,this.createItem(r)),super.get(r)}}const C=e=>e&&typeof e=="object"&&typeof e.then=="function",b=(e,r)=>(...t)=>{x.runtime.lastError?e.reject(new Error(x.runtime.lastError.message)):r.singleCallbackArg||t.length<=1&&r.singleCallbackArg!==!1?e.resolve(t[0]):e.resolve(t)},p=e=>e==1?"argument":"arguments",X=(e,r)=>function(o,...a){if(a.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${p(r.minArgs)} for ${e}(), got ${a.length}`);if(a.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${p(r.maxArgs)} for ${e}(), got ${a.length}`);return new Promise((l,A)=>{if(r.fallbackToNoCallback)try{o[e](...a,b({resolve:l,reject:A},r))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),o[e](...a),r.fallbackToNoCallback=!1,r.noCallback=!0,l()}else r.noCallback?(o[e](...a),l()):o[e](...a,b({resolve:l,reject:A},r))})},G=(e,r,t)=>new Proxy(r,{apply(o,a,l){return t.call(a,e,...l)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const E=(e,r={},t={})=>{let o=Object.create(null),a={has(A,n){return n in e||n in o},get(A,n,u){if(n in o)return o[n];if(!(n in e))return;let i=e[n];if(typeof i=="function")if(typeof r[n]=="function")i=G(e,e[n],r[n]);else if(T(t,n)){let y=X(n,t[n]);i=G(e,e[n],y)}else i=i.bind(e);else if(typeof i=="object"&&i!==null&&(T(r,n)||T(t,n)))i=E(i,r[n],t[n]);else if(T(t,"*"))i=E(i,r[n],t["*"]);else return Object.defineProperty(o,n,{configurable:!0,enumerable:!0,get(){return e[n]},set(y){e[n]=y}}),i;return o[n]=i,i},set(A,n,u,i){return n in o?o[n]=u:e[n]=u,!0},defineProperty(A,n,u){return Reflect.defineProperty(o,n,u)},deleteProperty(A,n){return Reflect.deleteProperty(o,n)}},l=Object.create(e);return new Proxy(l,a)},H=e=>({addListener(r,t,...o){r.addListener(e.get(t),...o)},hasListener(r,t){return r.hasListener(e.get(t))},removeListener(r,t){r.removeListener(e.get(t))}}),Y=new S(e=>typeof e!="function"?e:function(t){const o=E(t,{},{getContent:{minArgs:0,maxArgs:0}});e(o)}),V=new S(e=>typeof e!="function"?e:function(t,o,a){let l=!1,A,n=new Promise(_=>{A=function(f){l=!0,_(f)}}),u;try{u=e(t,o,A)}catch(_){u=Promise.reject(_)}const i=u!==!0&&C(u);if(u!==!0&&!i&&!l)return!1;const y=_=>{_.then(f=>{a(f)},f=>{let z;f&&(f instanceof Error||typeof f.message=="string")?z=f.message:z="An unexpected error occurred",a({__mozWebExtensionPolyfillReject__:!0,message:z})}).catch(f=>{console.error("Failed to send onMessage rejected reply",f)})};return y(i?u:n),!0}),ee=({reject:e,resolve:r},t)=>{x.runtime.lastError?x.runtime.lastError.message===w?r():e(new Error(x.runtime.lastError.message)):t&&t.__mozWebExtensionPolyfillReject__?e(new Error(t.message)):r(t)},J=(e,r,t,...o)=>{if(o.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${p(r.minArgs)} for ${e}(), got ${o.length}`);if(o.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${p(r.maxArgs)} for ${e}(), got ${o.length}`);return new Promise((a,l)=>{const A=ee.bind(null,{resolve:a,reject:l});o.push(A),t.sendMessage(...o)})},re={devtools:{network:{onRequestFinished:H(Y)}},runtime:{onMessage:H(V),onMessageExternal:H(V),sendMessage:J.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:J.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return v.privacy={network:{"*":Z},services:{"*":Z},websites:{"*":Z}},E(x,re,v)};s.exports=D(chrome)}else s.exports=globalThis.browser})})(K);var k=K.exports;function h(g,d){var s=document.createElement("div");s.innerHTML=`
                    <label>${d}:</label>
                    <input name="input_file" type="file" style="display:inline-block;"/>
                    `,s.className="lbp";var m=document.createElement("button");m.onclick=function(W){k.runtime.sendMessage({pageName:"parser",action:g}).then(w=>{try{console.log(w),D(JSON.stringify(w.response,null,"   "),g+".json","text/plain")}catch(x){console.log(x)}function D(x,v,S){var C=new Blob([x],{type:S});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(C,v);else{var b=document.createElement("a"),p=URL.createObjectURL(C);b.href=p,b.download=v,document.body.appendChild(b),b.click(),setTimeout(function(){document.body.removeChild(b),window.URL.revokeObjectURL(p)},0)}}})},m.style.display="inline-block",m.innerHTML="Start",s.appendChild(m),document.querySelector("#parseBlock").appendChild(s)}h("organ_expert","Эксперты органа");h("shema","Схемы");h("tehreglaments","Техрегламенты");h("legalForm","Правовые формы");h("techregProductListEEU","Группы продукции*");h("type_of_research","Тип испытаний и лаборатории");h("singleListRU","Единый перечень продукции РФ*");h("oksm","Страны");const P=document.querySelector("#agency_code"),R=document.querySelector("#agency_keyword"),N=document.querySelector("#isTest");document.querySelector("#select_organ");const q=document.querySelector("#indexCertif"),M=document.querySelector("#algorithm"),O=document.querySelector("#pwdCertif"),L=document.querySelector("#assignRegNumber"),j=document.querySelector("#isRobotSignErrors"),ne=document.querySelector("#orgId"),te=document.querySelector("#certificationAuthority"),B=document.querySelector("#file_time_out"),$=document.querySelector("#revoke_applicant_document"),F=document.querySelector("#revoke_applicant_document_number"),U=document.querySelector("#revoke_teh_document"),I=document.querySelector("#revoke_teh_document_number");var Q=[P,R,N,q,M,O,L,j,B,$,F,U,I];function oe(){try{let g=document.location.origin,d={origin:g,agency_code:P.value,agency_keyword:R.value,isTest:N.checked,assignRegNumber:L.checked,isRobotSignErrors:j.checked,indexCertif:q.value,algorithm:M.value,pwdCertif:O.value,file_time_out:B.value,revoke_applicant_document:$.value,revoke_applicant_document_number:F.value,revoke_teh_document:U.value,revoke_teh_document_number:I.value};return console.log("element values",Q.map(s=>s.value)),k.storage.local.get().then(s=>(console.log(s),s.hasOwnProperty("originSettings")?(s=s.originSettings.filter(m=>m.origin!=g),s.push({origin:g,agency_code:P.value,agency_keyword:R.value,isTest:N.checked,assignRegNumber:L.checked,isRobotSignErrors:j.checked,indexCertif:q.value,algorithm:M.value,pwdCertif:O.value,file_time_out:B.value,revoke_applicant_document:$.value,revoke_applicant_document_number:F.value,revoke_teh_document:U.value,revoke_teh_document_number:I.value})):s=[d],console.log("browser.storage.local",s),k.storage.local.set({originSettings:s})))}catch(g){console.log(g)}}function c(g,d,s){var m=g.length&&g[0].hasOwnProperty(d)&&g[0][d]?g[0][d]:s;return m}const ge=[];function ie(g){console.log("updateUI",g),Object.keys(g).length||k.storage.local.set({originSettings:ge}),ne.value=g.orgId,te.value=g.certificationAuthority;let d=document.location.origin,s=[];switch(g.originSettings&&(s=g.originSettings.filter(m=>m.origin==d)),d){default:P.value=c(s,"agency_code","agency_code Органа"),R.value=c(s,"agency_keyword","agency_keyword Органа"),N.checked=c(s,"isTest",0),L.checked=c(s,"assignRegNumber",0),j.checked=c(s,"isRobotSignErrors",0),q.value=c(s,"indexCertif",0),M.value=c(s,"algorithm",0),O.value=c(s,"pwdCertif",""),B.value=c(s,"file_time_out",15),$.value=c(s,"revoke_applicant_document","Решение"),F.value=c(s,"revoke_applicant_document_number","Б/Н"),U.value=c(s,"revoke_teh_document","Решение"),I.value=c(s,"revoke_teh_document_number","Б/Н");break}}function ae(g){console.error(g)}k.storage.local.get().then(ie,ae);Q.forEach(g=>{g.addEventListener("change",oe)});
