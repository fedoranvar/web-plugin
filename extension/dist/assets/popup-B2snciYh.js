import{o as s,c as u,b as t,h as y,d as q,a as i,j as g,k as c,w as m,l as b,u as a,i as p,m as _,n as f,p as k,q as x,e as h,_ as D,f as L,g as V}from"./__uno-zte6b9vK.js";const A={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},I=t("path",{fill:"currentColor",d:"m4.878.282l.348 1.071A2.206 2.206 0 0 0 6.624 2.75l1.072.348l.022.006a.423.423 0 0 1 0 .798l-1.072.348a2.208 2.208 0 0 0-1.399 1.397L4.9 6.717a.423.423 0 0 1-.798 0l-.348-1.07a2.204 2.204 0 0 0-1.399-1.403l-1.072-.348a.423.423 0 0 1 0-.798l1.072-.348a2.208 2.208 0 0 0 1.377-1.397L4.08.283a.423.423 0 0 1 .799 0m4.905 7.931l-.766-.248a1.577 1.577 0 0 1-.998-.999l-.25-.764a.302.302 0 0 0-.57 0l-.248.764a1.575 1.575 0 0 1-.984.999l-.765.248a.302.302 0 0 0 0 .57l.765.249a1.577 1.577 0 0 1 1 1.002l.248.764a.302.302 0 0 0 .57 0l.249-.764a1.575 1.575 0 0 1 .999-.999l.765-.248a.302.302 0 0 0 0-.57zm-3.768 2.134l.207.637l-1.97 1.97a1.438 1.438 0 0 0-.386.705l-.707 3.182l3.159-.702c.282-.063.54-.205.744-.409l9.358-9.358a1.975 1.975 0 0 0-2.793-2.792L9.965 7.242l-.637-.21a.678.678 0 0 1-.23-.14a.418.418 0 0 1-.088-.11l3.91-3.91a2.975 2.975 0 0 1 4.207 4.207l-.67.67l.336.337a2 2 0 0 1 0 2.828l-.94.94a.5.5 0 0 1-.707-.708l.94-.939a1 1 0 0 0 0-1.414l-.336-.336l-7.98 7.98a2.519 2.519 0 0 1-1.235.678l-3.926.873a.5.5 0 0 1-.597-.596l.878-3.95c.1-.453.328-.867.655-1.195l2.212-2.211a.607.607 0 0 1 .258.311"},null,-1),B=[I];function M(n,o){return s(),u("svg",A,[...B])}const U={name:"fluent-pen-sparkle20-regular",render:M},N={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},O=t("path",{fill:"currentColor",d:"M12 2a1 1 0 0 1 1 1v10.586l2.293-2.293a1 1 0 0 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 1 1 1.414-1.414L11 13.586V3a1 1 0 0 1 1-1M5 17a1 1 0 0 1 1 1v2h12v-2a1 1 0 1 1 2 0v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2a1 1 0 0 1 1-1"},null,-1),S=[O];function R(n,o){return s(),u("svg",N,[...S])}const j={name:"mi-download",render:R},E={viewBox:"0 0 1792 1792",width:"1.2em",height:"1.2em"},F=t("path",{fill:"currentColor",d:"M1764 11q33 24 27 64l-256 1536q-5 29-32 45q-14 8-31 8q-11 0-24-5l-453-185l-242 295q-18 23-49 23q-13 0-22-4q-19-7-30.5-23.5T640 1728v-349l864-1059l-1069 925l-395-162q-37-14-40-55q-2-40 32-59L1696 9q15-9 32-9q20 0 36 11"},null,-1),z=[F];function H(n,o){return s(),u("svg",E,[...z])}const W={name:"fa-send",render:H},G={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},J=t("g",{fill:"currentColor"},[t("path",{d:"M12 4a1 1 0 0 0-1 1c0 1.692-2.046 2.54-3.243 1.343a1 1 0 1 0-1.414 1.414C7.54 8.954 6.693 11 5 11a1 1 0 1 0 0 2c1.692 0 2.54 2.046 1.343 3.243a1 1 0 0 0 1.414 1.414C8.954 16.46 11 17.307 11 19a1 1 0 1 0 2 0c0-1.692 2.046-2.54 3.243-1.343a1 1 0 1 0 1.414-1.414C16.46 15.046 17.307 13 19 13a1 1 0 1 0 0-2c-1.692 0-2.54-2.046-1.343-3.243a1 1 0 0 0-1.414-1.414C15.046 7.54 13 6.693 13 5a1 1 0 0 0-1-1m-2.992.777a3 3 0 0 1 5.984 0a3 3 0 0 1 4.23 4.231a3 3 0 0 1 .001 5.984a3 3 0 0 1-4.231 4.23a3 3 0 0 1-5.984 0a3 3 0 0 1-4.231-4.23a3 3 0 0 1 0-5.984a3 3 0 0 1 4.231-4.231"}),t("path",{d:"M12 10a2 2 0 1 0 0 4a2 2 0 0 0 0-4m-2.828-.828a4 4 0 1 1 5.656 5.656a4 4 0 0 1-5.656-5.656"})],-1),K=[J];function Q(n,o){return s(),u("svg",G,[...K])}const X={name:"mi-settings",render:Q};function v(n){if(!n)return alert("Укажите корректную ссылку.");const o=new URL(n);return{origin:o.origin,documentToken:o.searchParams.get("document_token"),documentId:o.searchParams.get("document_id"),documentType:o.searchParams.get("document_type")}}function Y(n){var o=window.open(n,"_blank");o.focus(),logo_docs}function Z(n,o,d="Действие успешно выполнено!"){const e=v(n);if(console.log("===== URLPARAMS: ",e),!e.documentToken||!e.documentId||!e.documentType)return alert("Указана не корректная ссылка.");try{return o=Object.assign({id:String(e.documentId),locationOrigin:e.origin,advanceType:e.documentType,document_token:e.documentToken,mode:"applications",module:"ds",isSrd:!0},o),y.runtime.sendMessage(o).then(r=>{r.done?(r.documentFgisData&&(console.log("data :>> ",r),Y(r.documentFgisData.url)),alert(d)):(r.err=r.err.replace("Token is expiredОшибка в адвансе","Срок действия ссылки истек"),r.err=r.err.replace("Token not foundОшибка в адвансе","Указана не корректная ссылка"),alert(r.err))})}catch(r){console.log("activeAction error:>> ",n,o,d,r)}}function ee(n){return console.log("sendDocument :>> ",n),Z(n,{action:"saveDeclarationDs"},"Документ успешно выгружен и открыт в новой вкладке.")}function oe(n){const o=v(n);let d=`${o.origin}/api/v3/fgis/${o.documentType}/document/download/${o.documentId}?document_token=${o.documentToken}`;console.log("=== DOWNLOAD: ",d),window.open(d)}console.log("srd end :>> ");const te={class:"w-[500px] px-4 py-5 text-center text-gray-700"},ne={for:"docLink",class:"block relative text-left mb-2 text-sm font-medium text-gray-900 dark:text-white"},re={class:"block m-4"},le={key:0,class:"px-3 pb-3 mt-3 border-dotted border-sky-300 border-1 rounded-md"},ae=t("label",{for:"docIndex",class:"block text-left my-2 text-sm font-medium text-gray-900 dark:text-white"},"Тип",-1),de=t("label",{for:"docType",class:"block text-left my-2 text-sm font-medium text-gray-900 dark:text-white"},"ПИН",-1),se=t("label",{for:"docPin",class:"block text-left my-2 text-sm font-medium text-gray-900 dark:text-white"},"Индекс",-1),ue={class:"block m-4"},ce=q({__name:"Popup",setup(n){function o(){y.runtime.openOptionsPage()}return(d,e)=>{const r=X,$=D,C=W,T=j,P=U;return s(),u("main",te,[t("button",{class:"absolute icon-btn mt-2 mx-2 text-2xl right-0 top-0",onClick:o},[i(r)]),i($),t("label",ne,[g("Ссылка "),t("button",{class:"mx-2 mt-2 text-xs right-0 absolute text-blue-700 hover:bg-yellow-300",onClick:e[0]||(e[0]=l=>c.value="")}," очистить ")]),m(t("textarea",{rows:"3",placeholder:"http://*.advance-docs.ru/...",id:"docLink","onUpdate:modelValue":e[1]||(e[1]=l=>p(c)?c.value=l:null),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},`
      `,512),[[b,a(c)]]),t("div",re,[t("button",{type:"button",class:"inline-flex focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:e[2]||(e[2]=l=>a(ee)(a(c)))},[i(C),g("Отправить")]),t("button",{type:"button",class:"inline-flex text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800",onClick:e[3]||(e[3]=l=>a(oe)(a(c)))},[i(T),g("Скачать")])]),a(h)?(s(),u("div",le,[ae,m(t("input",{placeholder:"Индекс",id:"docIndex","onUpdate:modelValue":e[4]||(e[4]=l=>p(_)?_.value=l:null),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[b,a(_)]]),de,m(t("input",{placeholder:"Тип",id:"docType","onUpdate:modelValue":e[5]||(e[5]=l=>p(f)?f.value=l:null),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[b,a(f)]]),se,m(t("input",{placeholder:"ПИН",id:"docPin","onUpdate:modelValue":e[6]||(e[6]=l=>p(k)?k.value=l:null),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[b,a(k)]])])):x("",!0),t("div",ue,[a(h)?(s(),u("button",{key:0,type:"button",class:"inline-flex text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800",onClick:e[7]||(e[7]=(...l)=>d.signDocument&&d.signDocument(...l))},[i(P),g(" Подписать")])):x("",!0)])])}}}),w=L(ce);V(w);w.mount("#app");
